
<!-- LÄGG DETTA I index.html om du saknar modal -->
<div id="manualModal" class="card hidden" style="position:fixed;inset:0;margin:auto;max-width:900px;max-height:92vh;overflow:auto;z-index:85;background:var(--panel)">
  <div class="row" style="justify-content:space-between;align-items:center;border-bottom:1px solid var(--line);padding-bottom:8px">
    <div><b>Lägg kupong manuellt</b> <span class="mini">Fyll alla avdelningar</span></div>
    <div class="row">
      <input id="manualName" class="name" placeholder="Namn på kupong" style="margin-right:8px">
      <button id="manualSave" class="btn">Spara kupong</button>
      <button id="manualClose" class="btn secondary" onclick="document.getElementById('manualModal').classList.add('hidden')">Stäng</button>
    </div>
  </div>
  <div class="row" style="gap:16px">
    <div class="card" style="flex:1;min-width:320px">
      <div class="mini">Skriv hästnr separerade med mellanslag (intervall 10–15 tillåts)</div>
      <div id="manualRows" class="grid" style="grid-template-columns: 80px 1fr; gap:6px"></div>
    </div>
    <div class="card" style="flex:1;min-width:260px">
      <div class="mini">Förhandsvisning</div>
      <div id="manualPreview" style="min-height:200px;font-family:ui-monospace,Consolas,monospace;white-space:pre-wrap"></div>
    </div>
  </div>
</div>
<script>
(function populateManualRows(){
  const host = document.getElementById('manualRows'); if(!host) return;
  const COUNT = 6;
  host.innerHTML = '';
  for(let i=1;i<=COUNT;i++){
    const lbl = document.createElement('div'); lbl.textContent = 'AVD '+i; lbl.className='mini';
    const inp = document.createElement('input'); inp.className='name'; inp.placeholder='t.ex. 1 2 5 10-12'; inp.dataset.avd=i; inp.style.width='100%';
    inp.addEventListener('input', ()=>{
      const rows = [...host.querySelectorAll('input')].map(el=>({avd:+el.dataset.avd, txt:el.value.trim()})).filter(x=>x.txt);
      document.getElementById('manualPreview').textContent = rows.map(r=>`AVD ${r.avd}: ${r.txt}`).join('\n');
    });
    host.appendChild(lbl); host.appendChild(inp);
  }
})();
</script>
