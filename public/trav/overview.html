<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Trav ‚Äì √ñverblick</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./css/trav.css">
  <link rel="stylesheet" href="./css/horse-details.css">
</head>
<body>
  <div class="page">
    <header class="topbar overview-topbar">
      <button class="btn" id="btn-back">&#8592; Tillbaka</button>

      <div class="topbar-center">
        <h1 id="ov-title">√ñverblick</h1>
        <p class="subtitle" id="ov-meta"></p>
      </div>

      <div class="topbar-right">
        <span id="ov-game-type" class="badge"></span>
      </div>
    </header>

    <main class="overview-layout">
      <!-- Slider-header f√∂r avdelningar -->
 <section class="division-header">
 


  <!-- Pris-info (redan finns) -->
  <div id="price-info" class="price-info"></div>

  <!-- üîπ NYTT: insatsniv√• ‚Äì visas bara f√∂r V85 via JS -->
  <div id="stake-panel" class="stake-panel" hidden>
    <div class="stake-title">V√§lj insatsniv√• (V85)</div>
    <div class="stake-options">
      <button class="btn small stake-option" data-stake="original">
        Original<br><span class="stake-sub">0,50 kr (100%)</span>
      </button>
      <button class="btn small stake-option" data-stake="70">
        70%<br><span class="stake-sub">0,35 kr</span>
      </button>
      <button class="btn small stake-option" data-stake="50">
        50%<br><span class="stake-sub">0,25 kr</span>
      </button>
      <button class="btn small stake-option" data-stake="30">
        30%<br><span class="stake-sub">0,15 kr</span>
      </button>
    </div>
  </div>

    <div class="division-number-row" id="division-number-row"></div>
</section>


      <!-- Stora blocket med tre kolumner -->
      <section class="big-block">
 <div class="side-block" id="popular-block">
  <!--<h2>Popul√§rf√§lt</h2>-->
  <div id="popular-number-list" class="number-column">
    <!-- nummer fylls av JS -->
  </div>
</div>

  

 <div class="center-block" >
  <div class="center-block" >
    <!--<h2>
      H√§star i avdelning
      <span id="center-division-index">1</span>
    </h2>-->

    <div id="horse-table-container" class="horse-table-wrapper">
      <!-- Tabell fylls av overview.js -->
    </div>

  
  
  </div>
</div>


<div class="side-block" id="idea-block">
  <!--<h2>Id√©f√§lt</h2>-->
  <div id="idea-number-list" class="number-column">
   
  </div>
</div>

</section>

<!-- üîπ NYTT: filterblocket -->
<section class="filter-section">
  <div class="filter-block">
    <div class="filter-block-inner">
      <div class="list-mode-toggle">
    <button class="btn list-mode-btn" data-mode="simple">Enkel lista</button>
    <button class="btn list-mode-btn" data-mode="detailed">Detaljerad lista</button>
    <button class="btn list-mode-btn" data-mode="icons">Ikoner</button>
  </div>

  <!-- F√∂rklaring av alla ikoner (visas bara i ikon-l√§ge) -->
  <div class="icon-legend hidden" id="icon-legend"></div>
  </div>
</section>

<section class="coupon-section">
  <div class="coupon-section-header">
    <h2>Kuponger</h2>
    <div class="coupon-header-actions">
             <!-- Grupp: Id√©f√§lts-kontroller -->
      <div class="coupon-idea-actions">
        <button class="btn small danger" id="btn-clear-idea">Rensa Id√©f√§lt</button>
        <button class="btn small" id="btn-save-idea-coupon">Spara Min kupong</button>
        <button class="btn small" id="btn-update-winners">Uppdatera vinnare</button>
      </div>
         <!-- Egen knapp: vanliga kuponger -->
      <div class="coupon-new-actions">
        <button class="btn small" id="btn-add-coupon">Ny kupong</button>
      
        <button class="btn small" id="btn-open-chance">Chans kupong</button>
        <button class="btn small" id="btn-open-jackpot">Jackpot kupong</button>
        <button class="btn small" id="btn-open-split">Split kupong</button>
        <button class="btn small" id="btn-open-reverse">Omv√§nd kupong</button>
        <button class="btn small" id="btn-open-import-atg">Importera ATG</button>
        <button class="btn small" id="btn-open-paste-coupon">Klistra kupong</button>
        <button class="btn small" id="btn-open-fill">Fyll p√• kupong</button>
      </div>

  </div>
<!-- Panel f√∂r att fyll p√• kupongen -->
  <div id="fill-panel" class="coupon-add-panel" hidden>
  <h3 style="margin-top:0">Fyll p√• kupong</h3>

  <div class="hint" id="fill-selected-info">V√§lj en kupong i listan‚Ä¶</div>

  <div class="form-row">
    <label for="fill-price">Pris (kr)</label>
    <input id="fill-price" type="number" min="1" step="1" value="200">
  </div>

  <div class="form-row">
    <label for="fill-count">Antal kuponger</label>
    <input id="fill-count" type="number" min="1" max="50" value="5">
  </div>

  <div class="form-row">
    <label for="fill-spikes">Antal spik</label>
    <input id="fill-spikes" type="range" min="0" max="8" value="2">
    <div class="slider-value"> <span id="fill-spikes-display">2</span> </div>
  </div>

  <div class="form-row">
    <label for="fill-profile">H√∂g procentare ‚Üí L√•g procentare</label>
    <input id="fill-profile" type="range" min="1" max="7" step="1" value="3">
    <div class="slider-value">
      Steg: <span id="fill-profile-display">3</span>
    </div>
    <div class="hint">
      Steg 1: 80/15/5 ‚Ä¢ Steg 2: 80/15/5 ‚Ä¢ Steg 3: 60/30/10 ‚Ä¢ Steg 4: 50/25/25 ‚Ä¢
      Steg 5: 30/30/40 ‚Ä¢ Steg 6: 15/20/65 ‚Ä¢ Steg 7: 5/15/80
    </div>
  </div>

  <div class="form-actions">
    <button class="btn primary" id="btn-fill-do">Skapa</button>
    <button class="btn" id="btn-fill-cancel" type="button">Avbryt</button>
  </div>
</div>

<!-- Panel f√∂r att klistra in kupongtext -->
<div id="paste-coupon-panel" class="coupon-add-panel" hidden>
  <h3>Klistra kupong</h3>

  <div class="form-row">
    <label for="paste-coupon-text">Kupongtext</label>
    <textarea id="paste-coupon-text" rows="12"
      placeholder="Klistra in kupongtext h√§r‚Ä¶"></textarea>
  </div>

  <div class="coupon-add-actions">
    <button class="btn primary" id="btn-paste-coupon-create">Skapa kupong</button>
    <button class="btn" id="btn-paste-coupon-cancel">Avbryt</button>
  </div>
</div>


  <!-- Panel f√∂r att Importera ATG-kupong -->

<!-- Importera ATG -->
<div id="import-atg-panel" class="panel" hidden>
  <div class="panel-title">Importera ATG</div>

  <label class="label" for="import-atg-preset">F√∂rinst√§llda l√§nkar</label>
  <select id="import-atg-preset" class="input">
    <option value="">‚Äî V√§lj ‚Äî</option>
  </select>

  <label class="label" for="import-atg-url">ATG-l√§nk</label>
  <input id="import-atg-url" class="input" type="text" placeholder="Klistra in ATG-l√§nk‚Ä¶" />

  <label class="label" for="import-atg-save-name">Spara l√§nk som</label>
  <input id="import-atg-save-name" class="input" type="text" placeholder="Ex. Speltorsken 25:-" />

  <div class="panel-actions">
    <button class="btn small" id="btn-import-atg-do">Importera kupong</button>
    <button class="btn small" id="btn-import-atg-cancel">Avbryt</button>
    <button class="btn small" id="btn-import-atg-save">Spara l√§nk</button>
  </div>
</div>




  <!-- Panel f√∂r att skapa kupong -->
  <div id="coupon-add-panel" class="coupon-add-panel" hidden>
    <h3>Ny kupong</h3>
    <p class="coupon-hint">
      Klicka p√• h√§stnumren i varje avdelning f√∂r att v√§lja vilka som ska med i kupongen.
    </p>

    <div id="coupon-builder" class="coupon-builder">
      <!-- Fylls av overview.js -->
    </div>

    <div class="coupon-add-actions">
      <button class="btn primary" id="btn-save-coupon">Spara kupong</button>
      <button class="btn" id="btn-cancel-coupon">Avbryt</button>
    </div>
  </div>

  <!-- Panel f√∂r att skapa kupong -->
  <div id="coupon-add-panel" class="coupon-add-panel" hidden>
    ...
  </div>

  <!-- üîπ NYTT: panel f√∂r Split kupong -->
  <div id="split-panel" class="coupon-add-panel" hidden>
    <h3>Split kupong</h3>

    <div class="form-row">
      <label for="split-name">Namn</label>
      <input id="split-name" type="text" placeholder="Ex. Skr√§llsystem" />
    </div>

    <div class="form-row">
      <label for="split-count">Hur m√•nga kuponger</label>
      <input id="split-count" type="number" min="1" value="2" />
    </div>

    <div class="form-row">
      <label for="split-max-price">Max pris per kupong (kr)</label>
      <input id="split-max-price" type="number" min="1" step="1" value="70" />
    </div>

    <div class="form-row">
      <label for="split-spikes">Antal spikar per kupong</label>
      <input id="split-spikes" type="number" min="0" value="2" />
    </div>

  

    <div class="form-row">
  <label for="split-pattern">F√∂rdelning (t.ex. 1x1x1x2x3x3x3x3)</label>
  <div id="split-pattern-suggestions" class="split-pattern-suggestions"></div>

  
  <input
    id="split-pattern"
    type="text"
    placeholder="l√§mna tomt f√∂r auto"
  />
</div>



<!-- Antal superskr√§llar (h√§star < 5% V85) per kupong -->
<div class="form-row">
  <label for="split-supers">Antal superskr√§llar per kupong</label>
  <input
    id="split-supers"
    type="number"
    min="0"
    step="1"
    value="0"
  />
</div>

<div class="form-row">
  <label class="form-label" for="split-use-popular">
    Bygg system fr√•n kuponger (popul√§rf√§lt)
  </label>
  <label class="toggle">
    <input type="checkbox" id="split-use-popular" checked>
    <span>P√• / Av</span>
  </label>
</div>

    <p class="hint">
      Systemet v√§ljer ut spikar fr√•n de mest spelade h√§starna i dina befintliga kuponger
      och bygger <em>N</em> nya kuponger runt dem.
    </p>

      <div class="coupon-add-actions">
      <div id="split-pattern-suggestions" class="split-pattern-suggestions"></div>
      <button class="btn primary" id="btn-split-do">Skapa split-kuponger</button>
      <button class="btn" id="btn-split-cancel">Avbryt</button>
    </div>
  </div>
<!-- Panel f√∂r Chance kupong -->
  <div id="chance-panel" class="coupon-add-panel" hidden>
  <h3>Chans kupong</h3>

  <div class="form-row">
    <label for="chance-name">Namn</label>
    <input id="chance-name" type="text" placeholder="Ex. Chans" />
  </div>

  
<div class="form-row">
    <label for="chance-count">Hur m√•nga chans-kuponger</label>
    <input id="chance-count" type="number" min="1" value="2" />
  </div>

  <div class="form-row">
    <label for="chance-max-price">Max pris per kupong (kr)</label>
    <input id="chance-max-price" type="number" min="1" step="1" value="100" />
  </div>

  <div class="form-row">
    <label for="chance-level">Chansniv√• (1‚Äì5)</label>
    <input id="chance-level" type="range" min="1" max="5" step="1" value="4" />
    <div class="slider-value" id="chance-level-display">4</div>
  </div>

  <div class="form-row">
  <label for="chance-spikes">Antal spik</label>
  <input
    id="chance-spikes"
    type="range"
    min="0"
    max="8"
    step="1"
    value="0"
  />
  <div class="slider-value" id="chance-spikes-display">0</div>
</div>

<div class="form-row">
  <label class="checkbox">
    <input type="checkbox" id="chance-include-secondfav" />
    Ta ibland med andrahandfavoriten (om n√§ra favoriten i %)
  </label>
</div>
  <div class="form-row">
    <label class="form-label" for="chance-prefer-unplayed">
      Prioritera h√§star som INTE spelats p√• i √∂vriga kuponger
    </label>
    <label class="toggle">
      <input type="checkbox" id="chance-prefer-unplayed" checked>
      <span>P√• / Av</span>
    </label>
  </div>

  <p class="hint">
    Favoriten √§r alltid med i varje avdelning. Chansniv√• styr hur aggressivt vi fyller p√• med
    skr√§llar/minst spelade h√§star (inom maxpriset).
  </p>

  <div class="coupon-add-actions">
    <button class="btn primary" id="btn-chance-do">Skapa chans-kuponger</button>
    <button class="btn" id="btn-chance-cancel">Avbryt</button>
  </div>
</div>


  <!-- Panel f√∂r Jackpot kupong -->
  <div id="jackpot-panel" class="coupon-add-panel" hidden>
  <div class="coupon-add-title">Jackpot kupong</div>
  <div class="coupon-add-grid">
    <label class="coupon-add-field">
      <span>Namn</span>
      <input id="jackpot-name" type="text" value="Jackpot" />
    </label>

    <label class="coupon-add-field">
      <span>Antal kuponger</span>
      <input id="jackpot-count" type="number" min="1" value="1" />
    </label>

    <label class="coupon-add-field">
      <span>Maxpris (kr)</span>
      <input id="jackpot-max-price" type="number" min="1" value="200" />
    </label>

    <label class="coupon-add-field">
      <span>Antal spik (0 = auto)</span>
      <input id="jackpot-spikes" type="number" min="0" max="8" value="0" />
    </label>

    <div class="coupon-add-hint">
      Jackpot-kupong f√∂rs√∂ker v√§lja mer ‚Äúunika‚Äù h√§star (l√•gt V%) och kompletterar med n√•gra extra streck tills maxpriset n√•s.
      Skapade kuponger hamnar i <b>V√§ntel√§ge</b>.
    </div>
  </div>

  <div class="coupon-add-actions">
    <button class="btn small" id="btn-jackpot-do">Skapa jackpot kupong</button>
    <button class="btn small secondary" id="btn-jackpot-cancel">Avbryt</button>
  </div>
</div>



  <!-- Panel f√∂r Omv√§nd kupong -->
  <div id="reverse-panel" class="coupon-add-panel reverse-panel" hidden>


    <div class="form-row">
      <label for="reverse-name">Rubrik</label>
      <input id="reverse-name" type="text" />
    </div>

<div class="form-row">
  <label for="reverse-price-slider">Pris (kr)</label>

  <!-- Slider med fasta l√§gen -->
  <input
    id="reverse-price-slider"
    type="range"
    min="0"
    max="8"
    step="1"
    value="0"
  />

  <!-- Text under slidern som visar valt l√§ge (1 kr, 25 kr, ... , Egen) -->
  <div class="slider-value" id="reverse-price-display">1 kr</div>

  <!-- Sj√§lva prisf√§ltet som JS anv√§nder.
       Det fylls automatiskt av slidern, och blir bara editerbart vid "Egen". -->
  <input
    id="reverse-price"
    type="number"
    min="1"
    step="1"
    style="margin-top: 4px; width: 100%;"
  />
</div>

<div class="form-row">
  <label for="reverse-spikes">Antal spik</label>
  <input
    id="reverse-spikes"
    type="range"
    min="0"
    max="8"
    step="1"
    value="0"
  />
  <div class="slider-value" id="reverse-spikes-display">0</div>
</div>

<div class="form-row">
  <label for="reverse-supers">Antal superskr√§llar</label>
  <input
    id="reverse-supers"
    type="range"
    min="0"
    max="40"
    step="1"
    value="0"
  />
  <div class="slider-value" id="reverse-supers-display">0</div>
</div>


    <div class="coupon-add-actions">
      <button class="btn primary" id="btn-create-reverse">Skapa Omv√§nd kupong</button>
      <button class="btn" id="btn-cancel-reverse">Avbryt</button>
    </div>
  </div>



  <!-- Lista med sparade kuponger -->
  <div id="coupon-list" class="coupon-list">


  <!-- Lista med sparade kuponger -->
  <div id="coupon-list" class="coupon-list">
    <!-- Kupong-kort skapas i overview.js -->
  </div>
</section>
<!-- Baninformation -->
<section id="track-info-section" class="track-info-section">
  <h2>Bana</h2>
  <div id="track-info-box" class="track-info-box">
    <!-- Banf√∂rklaring -->
  </div>

  <div id="track-weather-box" class="track-weather-box">
    <!-- V√§der-info fylls av overview.js -->
  </div>
</section>

    </main>
  </div>

  <script type="module" src="./js/overview.js"></script>
</body>
</html>
