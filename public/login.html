
<!doctype html><html lang="sv"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Logga in – Inleverans</title>
<link rel="stylesheet" href="/styles.css"/>
<script src="/auth.js"></script>
</head><body>
  <!-- Global Project Buttons -->
  <nav class="projectbar" style="position:sticky;top:0;z-index:50;background:#0e1522;border-bottom:1px solid #1c2030;padding:.5rem 1rem;display:flex;gap:.5rem;align-items:center">
    <span class="muted" style="margin-right:.75rem">Projekt:</span>
    <a href="/sandningar.html" class="btn">Sändningar</a>
    <a href="/trav.html" class="btn">Trav</a>
    <a href="/plock/" class="btn">Plock</a>
    <a href="/statistik/" class="btn">Statistik</a>
  </nav>

<script>
(function(){
  try {
    var here = location.pathname.replace(/\/index\.html$/,''); // normalize
    var as = document.querySelectorAll('.projectbar a');
    as.forEach(function(a){
      var url = new URL(a.getAttribute('href'), location.origin);
      var p = url.pathname.replace(/\/index\.html$/,'');
      var match = false;
      // Exact or prefix match for folder links
      if (p.endsWith('/')) {
        match = here === p || here.startsWith(p);
      } else {
        match = here === p;
      }
      if (match) {
        a.style.background = '#16a34a';   // green
        a.style.color = '#08121c';
        a.style.boxShadow = '0 0 0 2px rgba(22,163,74,.35) inset';
        a.setAttribute('aria-current','page');
      }
    });
  } catch(e) { /* noop */ }
})();
</script>

<div style="max-width:1200px;margin:8px auto 0;padding:0 12px"><span id="apiBadge" style="font:12px/1.4 system-ui,Segoe UI,Roboto;background:#0b1220;border:1px solid #24324a;border-radius:999px;padding:6px 10px;color:#9fb3c8">API: testar...</span></div>

<div class="container" style="max-width:520px">
  <div class="card">
    <h1>Logga in</h1>
    <div class="grid">
      <label>Användarnamn</label>
      <input id="u" value="Admin" placeholder="Användarnamn"/>
      <label>Lösenord</label>
      <input id="p" type="password" value="test" placeholder="Lösenord"/>
      <button class="btn btn-green" id="go">Fortsätt</button>
      <div id="msg" class="small"></div>
    </div>
  </div>
</div>
<script>
  try{ if(InlevAuth.isAuthed()) location.href='/index.html'; }catch(e){}
(async()=>{ try{ const ok=await InlevAuth.health(); const b=document.getElementById('apiBadge'); if(b) { b.textContent = ok? 'API: OK (.netlify/functions)' : 'API: NÅR INTE /api/auth'; b.style.borderColor= ok?'#165':'#a33'; b.style.color= ok?'#8fffb0':'#fca5a5'; } } catch(e){} })();
  document.getElementById('go').onclick=async()=>{
    const ok = await InlevAuth.signIn(document.getElementById('u').value.trim(), document.getElementById('p').value);
    if(ok) location.href='/index.html'; else document.getElementById('msg').textContent='Fel inloggning';
  };
</script>
</body></html>
